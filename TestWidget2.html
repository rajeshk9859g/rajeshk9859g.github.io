<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title UserConfirmationText></title>
    <meta name="viewport"
          content="width=device-width, initial-scale=1">
    <script src="https://lpcdn.lpsnmedia.net/webagent/client-SDK.min.js"></script>

</head>
<body>
    <div class="container">
        <form>
            <input type="submit" value="Bind Info" onclick="bind()" /><br/> <br />
            <input type="submit" value="Get visitorInfo" onclick="getvisitorInfo()" /><br /><br />
            <input type="submit" value="Get chatInfo" onclick="getchatInfo()" />
        </form>
    </div>
<script>
    lpTag.agentSDK.init({});

    var pathToData = "visitorInfo"; //chatInfo visitorInfo.visitorName

    var onSuccess = function (data) {       
        console.log(data);
       
    };

    var onError = function (err) {      
        console.log(err);
    };
    var getvisitorInfo = function () {
        pathToData = "visitorInfo";
        lpTag.agentSDK.get(pathToData, onSuccess, onError);
    }

    var getchatInfo = function () {
         pathToData = "chatInfo"; //chatInfo visitorInfo.visitorNames
         lpTag.agentSDK.get(pathToData, onSuccess, onError);
    }

    var updateCallback = function (data) {
        
        var path = data.key;
        var value = data.newValue;
        console.log(data);
        console.log(path);
        console.log(value);            
    };

    var notifyWhenDone = function (err) {
        if (err) {
            
        }        
    };
    var bind = function () {
        pathToData = "visitorInfo.visitorName";
        lpTag.agentSDK.bind(pathToData, updateCallback, notifyWhenDone);
    }
</script>
</body>
</html>
